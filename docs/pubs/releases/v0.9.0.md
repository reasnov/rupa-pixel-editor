# Release Notes: v0.9.0 (The Kinetic Flow)

This major update focuses on the **Animation Workflow**, transforming Rupa into a professional-grade pixel animation studio. By introducing **Kinetic Assistance** and **Deterministic Exporting**, we enable baristas to create complex motion with the precision of a master etcher and the speed of a seasoned brewer.

## üöÄ Highlights: Kinetic Assistance (Blueprint 11)

### 1. The Drop Matrix (Professional Timeline)

The timeline has been refactored into a high-density matrix view, providing a complete overview of your project's structure.

- **Matrix View:** A grid where the Y-axis represents **Infusions** (Layers) and the X-axis represents **Cups** (Frames).
- **Sticky Labels:** Layer names remain pinned to the left, ensuring clear navigation even in complex sequences.
- **Visual Cues:** Each cell displays a "Drop" (dot) indicating whether a layer contains pixel data in that frame.
- **Window Modes:** Switch between **Minimized** (compact 32px), **Normal** (balanced), and **Maximized** (75% height) to fit your current focus.

### 2. Syrup Flow (Selection Propagation)

Automate repetitive motion by "pouring" patterns across time.

- **Pour Basin:** Access the new propagation menu from the selection info HUD.
- **Automated Projection:** Project a selected pattern across multiple subsequent frames with a defined linear offset (e.g., move 1px right every frame).
- **Structural Integrity:** Includes full Undo/Redo support for multi-frame transformations as a single action.

### 3. The Temporal Echo (Advanced Onion Skinning)

Visualize the path of your animation with multi-frame guidance.

- **Multi-Frame Ghosts:** See up to 3 frames into the past and 3 frames into the future.
- **Flavor Tints:** Past echoes are tinted in **Solarized Blue**, while future echoes appear in **Botanical Green**, making motion paths immediately obvious.

### 4. Steeped Layers & Aroma Pulse

Add life to static elements without manual frame-by-frame drawing.

- **Linked Cells (Steeped):** Toggle "Steeped" mode on an Infusion to synchronize its content across all cups automatically.
- **Procedural Modifiers (Aroma Pulse):** 
    - **Wiggle:** Add organic deterministic jitter to any layer.
    - **Sway:** Apply smooth sinusoidal horizontal movement, perfect for hair or foliage.

### 5. Menu Sections (Frame Tagging)

Organize your timeline into semantic sequences.

- **Tag Tray:** Define and color-code ranges of frames (e.g., "Idle", "Walk Cycle", "Attack").
- **Visual Navigation:** Labels appear in the new Tag Tray above the time ruler for instant orientation.

---

## üß∫ Export Stability: The Chronos Protocol (Blueprint 12)

We have completely rebuilt the animation export logic to ensure every cup is served perfectly.

- **Deterministic Assembly:** Replaced passive recording with **Manual Frame Assembly (`captureStream(0)`)**. Every frame is now explicitly requested, eliminating dropped frames and the "00:00 duration" video bug.
- **Accumulated Error Correction:** Implemented time-debt compensation for GIF exports, ensuring total duration is mathematically perfect despite GIF's 10ms unit limitation.
- **SVG Optimization:** Animated SVGs now use `display: none` for inactive frames, significantly reducing CPU load during playback in browsers.
- **User Feedback:** Added a "Preparing Cup..." notification to provide instant feedback during the assembly process.

---

## üõ† Improvements & Refinements

- **Quick Navigation:** Hold **`Ctrl + Click`** on the canvas to immediately jump the etcher to that spot without drawing.
- **Ambient Calibration:**
    - Increased the base volume of the piano soundscape (5x boost) for better presence at 50% settings.
    - The caf√© ambience now begins to flow at **20 minutes** (down from 30m).
- **ESC Key Sovereignty:** Refactored the escape stack to ensure modals and the Color Picker close consistently, even when input fields are focused.
- **UI Polishing:**
    - **Properties Panel:** Removed indentation for a cleaner, full-width appearance in the sidebar.
    - **State Indicator:** Disabled autohide so your current mode is always visible.
    - **Export Sync:** Fixed background color synchronization for custom blends in the Visual Tasting preview.
- **i18n Standardization:** Renamed over 50 technical keys in `common.json` to follow industry standards while preserving barista-themed UI labels.

---

## ‚öôÔ∏è Technical Changes

- **Logic Expansion:** Added `KineticLogic` for industry-standard easing equations and pixel interpolation.
- **State Integrity:** Optimized `LayerState` with a reactive `hasContent` flag for the timeline matrix.
- **Performance:** Implemented a **Visible Buffer Strategy** for exports, preventing background throttling in Chromium/Electron.

---

_"The flow of time is but another ingredient in the perfect brew."_
