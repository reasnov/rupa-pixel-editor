@import 'tailwindcss';

@font-face {
	font-family: 'Zen Maru Gothic';
	src: url('/fonts/ZenMaruGothic-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Courier Prime';
	src: url('/fonts/CourierPrime-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Tiny5';
	src: url('/fonts/Tiny5-Regular.ttf') format('truetype');
	font-weight: normal;
	font-style: normal;
}

@theme {
	/* The Nature Sanctuary Palette */
	--color-washi-white: #fdf6e3;
	--color-rice-straw: #f4f1bb;
	--color-bamboo-shoot: #d1e0d0;
	--color-sage-leaf: #a3b18a;
	--color-fern-green: #588157;
	--color-deep-forest: #3a5a40;
	--color-evergreen: #344e41;
	--color-stone-path: #dad7cd;
	--color-mist-gray: #8d99ae;
	--color-night-indigo: #2b2d42;

	/* The Craft Atelier Palette */
	--color-lantern-gold: #b58900;
	--color-rust-clay: #cb4b16;
	--color-sakura-pink: #e5989b;
	--color-ume-plum: #6d597a;
	--color-aged-oak: #b08968;
	--color-dark-walnut: #7f5539;
	--color-morning-amber: #d4a373;
	--color-matcha-dust: #ccd5ae;
	--color-river-stone: #6b705c;
	--color-forest-shadow: #333d29;

	/* Functional Aliases (Rural Transition) */
	--color-canvas-bg: var(--color-washi-white);
	--color-grid-border: var(--color-stone-path);
	--color-panel-bg: rgba(253, 246, 227, 0.95); /* Washi White with opacity */
	--color-sidebar-bg: var(--color-bamboo-shoot);
	--color-sidebar-text: var(--color-evergreen);
	--color-studio-text: var(--color-evergreen);
	--color-ui-accent: var(--color-lantern-gold);
}

:root {
	background-color: var(--color-canvas-bg);
	color: var(--color-studio-text);
	font-family: 'Courier Prime', monospace;
	--font-heading: 'Zen Maru Gothic', sans-serif;
}

h1,
h2,
h3,
.font-serif {
	font-family: var(--font-heading);
}

.font-tiny5 {
	font-family: 'Tiny5', system-ui;
}

body {
	margin: 0;
	padding: 0;
	overflow: hidden;
	height: 100vh;
	width: 100vw;
	background-color: var(--color-stone-path);
	background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
	pointer-events: auto;
}

/* CRT & Retro Filters Overlay */
.crt-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background:
		linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.03) 50%),
		linear-gradient(90deg, rgba(255, 0, 0, 0.01), rgba(0, 255, 0, 0.005), rgba(0, 0, 255, 0.01));
	background-size:
		100% 3px,
		2px 100%;
	z-index: 5000;
	pointer-events: none;
	opacity: 0.8;
}

.crt-overlay::after {
	content: ' ';
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	bottom: 0;
	right: 0;
	background: rgba(18, 16, 16, 0.03);
	opacity: 0;
	z-index: 5001;
	pointer-events: none;
	animation: flicker 0.15s infinite;
}

@keyframes flicker {
	0% {
		opacity: 0.1;
	}
	50% {
		opacity: 0.05;
	}
	100% {
		opacity: 0.1;
	}
}

.vignette {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.1);
	z-index: 4999;
	pointer-events: none;
}

canvas,
.pixel-grid {
	image-rendering: pixelated;
}

/* Redesigned Wooden Panels */
.editor-panel {
	background: var(--color-panel-bg);
	border: 2px solid var(--color-dark-walnut);
	box-shadow:
		inset 0 0 15px rgba(127, 85, 57, 0.1),
		4px 4px 0px var(--color-dark-walnut);
	border-radius: 4px;
}

.side-panel-left {
	border-right: 2px solid var(--color-dark-walnut);
	background: var(--color-washi-white);
}

.side-panel-right {
	border-left: 2px solid var(--color-dark-walnut);
	background: var(--color-washi-white);
}

.bottom-panel {
	border-top: 2px solid var(--color-dark-walnut);
	background: var(--color-washi-white);
}

.hud-panel {
	background: var(--color-washi-white);
	color: var(--color-evergreen);
	border-bottom: 2px solid var(--color-dark-walnut);
}

/* The Washi Frame (The Canvas) */
.editor-frame {
	background: var(--color-washi-white);
	border: 12px solid var(--color-aged-oak);
	outline: 2px solid var(--color-dark-walnut);
	border-radius: 2px;
	box-shadow:
		0 20px 50px rgba(0, 0, 0, 0.2),
		inset 0 0 20px rgba(0, 0, 0, 0.05);
	position: relative;
}

.editor-frame::after {
	content: '';
	position: absolute;
	inset: 0;
	background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
	opacity: 0.1;
	pointer-events: none;
}

/* 
	Retro Pixel Grid 
*/
.pixel-grid-surface {
	--grid-line-color: rgba(52, 78, 65, 0.15);

	background-image:
		linear-gradient(var(--grid-line-color) 1px, transparent 1px),
		linear-gradient(90deg, var(--grid-line-color) 1px, transparent 1px);

	background-size: calc(100% / var(--grid-cols)) calc(100% / var(--grid-rows));
	background-repeat: repeat;
}

.editor-checker-small {
	background-image:
		linear-gradient(45deg, rgba(0, 0, 0, 0.03) 25%, transparent 25%),
		linear-gradient(-45deg, rgba(0, 0, 0, 0.03) 25%, transparent 25%),
		linear-gradient(45deg, transparent 75%, rgba(0, 0, 0, 0.03) 75%),
		linear-gradient(-45deg, transparent 75%, rgba(0, 0, 0, 0.03) 75%);
	background-size: 8px 8px;
}

.status-tag {
	background: var(--color-washi-white);
	padding: 4px 12px;
	border-radius: 2px;
	font-size: 10px;
	color: var(--color-evergreen);
	text-transform: uppercase;
	letter-spacing: 0.1em;
	border: 1px solid var(--color-dark-walnut);
	box-shadow: 2px 2px 0px var(--color-dark-walnut);
}

/* Clicky Retro Buttons */
.editor-tool-btn {
	background: var(--color-washi-white);
	border: 1px solid var(--color-dark-walnut);
	color: var(--color-evergreen);
	padding: 6px 12px;
	border-radius: 4px;
	font-family: var(--font-heading);
	font-weight: 700;
	font-size: 12px;
	transition: all 0.1s steps(2);
	display: flex;
	align-items: center;
	gap: 6px;
	box-shadow: 2px 2px 0px var(--color-dark-walnut);
}

.editor-tool-btn:hover {
	background: var(--color-lantern-gold);
	color: white;
	transform: translate(-1px, -1px);
	box-shadow: 3px 3px 0px var(--color-dark-walnut);
}

.editor-tool-btn:active {
	transform: translate(1px, 1px);
	box-shadow: 0px 0px 0px var(--color-dark-walnut);
}

.editor-primary-btn {
	background: var(--color-lantern-gold);
	color: white;
	padding: 12px 24px;
	border-radius: 4px;
	font-family: 'Tiny5', system-ui;
	text-transform: uppercase;
	letter-spacing: 0.15em;
	transition: all 0.1s steps(2);
	border: 2px solid var(--color-dark-walnut);
	box-shadow: 4px 4px 0px var(--color-dark-walnut);
}

.editor-primary-btn:hover {
	transform: translate(-2px, -2px);
	box-shadow: 6px 6px 0px var(--color-dark-walnut);
	filter: brightness(1.1);
}

.editor-primary-btn:active {
	transform: translate(2px, 2px);
	box-shadow: 0px 0px 0px var(--color-dark-walnut);
}

.editor-secondary-btn {
	background: white;
	color: var(--color-evergreen);
	padding: 12px 24px;
	border-radius: 4px;
	font-family: var(--font-heading);
	font-weight: 700;
	transition: all 0.1s steps(2);
	border: 2px solid var(--color-dark-walnut);
	box-shadow: 4px 4px 0px var(--color-dark-walnut);
}

.editor-secondary-btn:hover {
	background: var(--color-rice-straw);
	transform: translate(-1px, -1px);
}

.editor-secondary-btn:active {
	transform: translate(2px, 2px);
	box-shadow: 0px 0px 0px var(--color-dark-walnut);
}

/* VFX: Lantern Glow Pulse */
@keyframes lantern-pulse {
	0% {
		box-shadow:
			0 0 10px rgba(181, 137, 0, 0.2),
			2px 2px 0px var(--color-dark-walnut);
	}
	50% {
		box-shadow:
			0 0 20px rgba(181, 137, 0, 0.5),
			2px 2px 0px var(--color-dark-walnut);
	}
	100% {
		box-shadow:
			0 0 10px rgba(181, 137, 0, 0.2),
			2px 2px 0px var(--color-dark-walnut);
	}
}

.is-active.tool-button,
.is-active-pigment {
	animation: lantern-pulse 3s infinite ease-in-out;
}

/* VFX: Pixel Steam */
@keyframes steam-drift {
	0% {
		transform: translateY(0) translateX(0) scale(1);
		opacity: 0;
	}
	20% {
		opacity: 0.4;
	}
	80% {
		opacity: 0.2;
	}
	100% {
		transform: translateY(-40px) translateX(10px) scale(1.5);
		opacity: 0;
	}
}

.pixel-steam {
	position: absolute;
	width: 4px;
	height: 4px;
	background: var(--color-washi-white);
	border-radius: 1px;
	filter: blur(1px);
	pointer-events: none;
}

/* VFX: 8-bit Rain */
@keyframes rain-fall {
	from {
		transform: translateY(-100vh) translateX(-20px);
	}
	to {
		transform: translateY(100vh) translateX(20px);
	}
}

.rain-particle {
	position: fixed;
	width: 1px;
	height: 6px;
	background: var(--color-mist-gray);
	opacity: 0.2;
	pointer-events: none;
	z-index: 1;
}

/* Updated Button Hover for Tactile Feel */
.editor-tool-btn:active,
.editor-primary-btn:active {
	transform: translate(2px, 2px);
	box-shadow: 0px 0px 0px var(--color-dark-walnut) !important;
}
